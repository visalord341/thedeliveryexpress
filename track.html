<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Delivery Express|track</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="track.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<script>
        function toggleMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }

        function toggleDropdown(event) {
            event.preventDefault();
            const dropdown = event.target.closest('.dropdown');
            dropdown.classList.toggle('active');
        }
    </script>
</head>
<body>

    <header class="navbar">
        <div class="logo">
            <a style="text-decoration: none;" class="logo-text" href="index.html">TDE</a>
        </div>
        <div class="hamburger" onclick="toggleMenu()">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
       <nav class="nav-links mobile-nav">
            <a href="services.html" class="nav-item">Services</a>
            <a href="solutions.html" class="nav-item">Solutions</a>
            <a href="partiner.html" class="nav-item">Partner</a>
            <a href="company.html" class="nav-item">Company</a>
            <a href="track.html" class="nav-item">Track</a>
            <a href="support.html" class="nav-item">Support</a>
            <div class="nav-item dropdown">
                <a href="#" class="dropbtn" onclick="toggleDropdown(event)">Ship Now <i class="fas fa-chevron-down"></i></a>
                <div class="dropdown-content">
                    <a href="domestics.html">Direct Ship</a>
                    <a href="login.html">Busines Shipments</a>
                </div>
            </div>
        </nav>
    </header>
    <!-- Notification Bar -->
    <div class="notification-bar">
    <div class="ticker-container">
        <div class="ticker-content">
            <span>
                Delhivery does not require OTP or credentials for address confirmation for your delivery.
            </span>
            <span>
                Our Customer Support team is reachable only from our website or app. Login with your phone number and raise your support request with us.
            </span>
            <span>
                SERVICE UPDATES: Beware of emails or communications from any other source.
            </span>
        </div>
        <div class="ticker-content" aria-hidden="true">
            <span>
                Delhivery does not require OTP or credentials for address confirmation for your delivery.
            </span>
            <span>
                Our Customer Support team is reachable only from our website or app. Login with your phone number and raise your support request with us.
            </span>
            <span>
                SERVICE UPDATES: Beware of emails or communications from any other source.
            </span>
        </div>
    </div>
</div>

<!-- tracking-->
 <main class="main-content">
    <div class="hero-section">
        <!-- Video Background -->
        <video autoplay loop muted playsinline class="hero-video-background">
            <!-- Replace 'path/to/your-video.mp4' and 'path/to/your-video.webm' with your actual video file paths -->
            <source src="mixkit-workers-moving-containers-from-a-cargo-ship-4450-hd-ready.mp4" type="video/mp4">
            <source src="videos/your-video.webm" type="video/webm">
            <!-- Fallback image if video cannot be played -->
            Your browser does not support the video tag.
        </video>

        <div class="hero-overlay">
            <div class="hero-text">
                <h1>Documents, Packages, and Everything Else
                <span class="highlight">Courier Anything, Anywhere!</span> </h1>
                <div class="service-list">
                    <span class="service-item">Express Parcel</span>
                    <span class="separator">|</span>
                    <span class="service-item">PTL</span>
                    <span class="separator">|</span>
                    <span class="service-item">FTL</span>
                    <span class="separator">|</span>
                    <span class="service-item">Cross Border</span>
                    <span class="separator">|</span>
                    <span class="service-item">Supply Chain</span>
                </div>
            </div>
        </div>
    </div>
         <div class="track-card-container">
            <div class="track-card">
                <h2>Track your order through</h2>

                <div class="tracking-options">
                    <span class="track-option active" data-type="mobile">Mobile</span>
                    <span class="track-option" data-type="awb">AWB</span>
                    <span class="track-option" data-type="orderId">Order Id</span>
                    <span class="track-option" data-type="lrn">LRN</span>
                </div>

                <div class="tracking-form">
                    <input type="text" id="tracking-input" placeholder="Enter Mobile Number">
                    <button class="otp-button" onclick="searchTracking()">Get Location</button>
                </div>

                <div class="app-downloads">
                    <p>DOWNLOAD OUR APP</p>
                    <div class="app-buttons">
                        <a href="#" class="app-button"><i class="fab fa-google-play"></i> Google Play</a>
                        <a href="#" class="app-button"><i class="fab fa-apple"></i> App Store</a>
                    </div>
                </div>

                <div id="searchResult" style="margin-top: 20px; display: none; padding: 15px; background: #f5f5f5; border-radius: 10px;"></div>
            </div>
        </div>
</main>

<!-- FAQ Details Section -->
<section class="support-faq-section">
    <div class="support-faq-content-left">
        <div class="support-faq-header">
            <h2 class="support-faq-title">FAQs</h2>
        </div>
        <div class="support-faq-accordion-container">
            <div class="accordion-item">
                <button class="accordion-header">
                    Why is my package delayed?
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <p>Package delays can occur due to various reasons, including unforeseen weather conditions, logistical issues, or high volume periods. Please check your tracking details for the most up-to-date information, or contact our support team if the delay persists.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    What do I do if tracking page doesn't show the expected date of arrival?
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <p>If your tracking page doesn't show an updated expected date of arrival, it might be due to a temporary system update or a transit delay. We recommend waiting 24 hours for the information to refresh. If it still doesn't update, please reach out to our customer support with your tracking ID.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    How can I get the contact number of my delivery partner?
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <p>For security and privacy reasons, we do not directly share the contact numbers of our delivery partners. However, you can communicate with your delivery partner through the Delhivery app once your shipment is out for delivery, or contact our customer support for assistance.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    What should I do if I am not available at the time of delivery?
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <p>If you're not available, our delivery partner will attempt redelivery on the next business day. You may also receive an option to reschedule delivery or pick up from a nearby Delhivery center via the app or SMS notification.</p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    My shipment has been returned/cancelled. What should I do?
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <p>If your shipment has been returned or cancelled, please review the reason provided in your tracking details. For further assistance or to understand the next steps, please contact our customer support team with your shipment details.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="support-faq-content-right">
        <div class="support-faq-image-card">
            <img src="https://images.unsplash.com/photo-1596769877782-b916543bd009?q=80&w=687&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Delivery person handing over package" class="support-faq-right-image">
        </div>
        <div class="support-faq-cta-card">
            <a href="#" class="ship-friends-cta">
                Ship to your friends <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        <div class="support-faq-image-card">
            <img src="https://plus.unsplash.com/premium_photo-1661302828763-4ec9b91d9ce3?q=80&w=1172&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="People working in a warehouse" class="support-faq-right-image">
        </div>
    </div>
</section>
 <footer class="site-footer">
        <div class="footer-top">
            <div class="footer-logo">
                <span class="logo-text">The Delivery Express</span>
                <div class="footer-meta">
                    <p>ISO 9001: 2015, ISO 27001: 2022 Certified Company</p>
                    <p>CIN: L63090DL2011PLC221234</p>
                </div>
            </div>
        </div>
        <div class="footer-links-container">
            <div class="footer-column">
                <h3>GET IN TOUCH</h3>
                <ul>
                    <p><Strong>Email:</Strong>contact@thedeliveryexpress.org</p>
                    <p><Strong>Phone:</Strong>+447441912610</p>
                    <p><Strong>Address:</Strong>New Oxford St,London WCTV 6PL,United Kingdom</p>
                </ul>
            </div>
            <div class="footer-column">
                <h3>SERVICES</h3>
                <ul>
                    <p>Express </p>
                    <p>Express Parcel</p>
                    <p>Warehousing</p>
                    <p>Part Truckload</p>
                    <p>Full Truckload</p>
                    <p>Cross Border</p>
                    <p>Data Intelligence</p>
                    <p>Software Platform</p>
                </ul>
            </div>
            <div class="footer-column">
                <h3>SOLUTIONS</h3>
                <ul>
                    <li>D2C Brands</li>
                    <li>Personal Courier</li>
                    <li>B2B Enterprises</li>
                </ul>
            </div>
           
            <div class="footer-column">
                <h3>COMPANY</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Governance</a></li>
                    <li><a href="#">Investor Relations</a></li>
                    <li><a href="#">ODR Portal</a></li>
                    <li><a href="#">Press Release</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
        
            <div class="footer-column">
                <h3>POLICIES</h3>
                <ul>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                    <li><a href="#">Fraud Disclaimer</a></li>
                    <li><a href="#">ONDC Disclaimer</a></li>
                </ul>
            </div>
        </div>
    </footer>

    
    <div id="result-popup" class="popup-container" style="display: none;">
        <div class="popup-content" style="max-width:900px;width:90vw;">
            <span class="popup-close" id="result-popup-close">&times;</span>
            <div id="popup-result-body"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script>
        function toggleMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }
        function toggleDropdown(event) {
            event.preventDefault();
            const dropdown = event.target.closest('.dropdown');
            dropdown.classList.toggle('active');
        }

        window.onload = function() {
            const popup = document.getElementById('popup-container');
            const closeBtn = document.querySelector('.popup-close');
            popup.style.display = 'flex';
            closeBtn.onclick = function() { popup.style.display = 'none'; }
            window.onclick = function(event) {
                if (event.target === popup) popup.style.display = 'none';
            }
            document.querySelector('.btn-primary').onclick = function() { popup.style.display = 'none'; };
            document.querySelector('.btn-secondary').onclick = function() { popup.style.display = 'none'; };
        };

        document.getElementById('result-popup-close').onclick = function () {
            document.getElementById('result-popup').style.display = 'none';
        }
        window.addEventListener('click', function (e) {
            const popup = document.getElementById('result-popup');
            if (e.target === popup) popup.style.display = 'none';
        });

        // Tracking logic
        const options = document.querySelectorAll('.track-option');
        const inputField = document.getElementById('tracking-input');
        const otpButton = document.querySelector('.otp-button');
        const resultPopup = document.getElementById('result-popup');
        const resultBody = document.getElementById('popup-result-body');
        let selectedTrackingField = 'mobile';
        const placeholders = {
            'mobile': 'Enter Mobile Number',
            'awb': 'Enter AWB Number',
            'orderId': 'Enter Order ID',
            'lrn': 'Enter LRN Number'
        };
        options.forEach(option => {
            option.addEventListener('click', () => {
                options.forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
                const selectedType = option.dataset.type || 'mobile';
                selectedTrackingField = selectedType;
                inputField.placeholder = placeholders[selectedType] || 'Enter value';
                otpButton.style.display = 'inline-block';
            });
        });
        document.addEventListener('DOMContentLoaded', () => {
            const activeOption = document.querySelector('.track-option.active');
            if (activeOption) activeOption.click();
        });

        // Firebase initialization
        const firebaseConfig = {
            apiKey: "AIzaSyA13edmqgi4_LG-FNW1yN50HTuhtXUes0g",
            authDomain: "travis-d095c.firebaseapp.com",
            projectId: "travis-d095c",
            storageBucket: "travis-d095c.appspot.com",
            messagingSenderId: "169773464605",
            appId: "1:169773464605:web:90584cfa67f8875fc65af4",
            measurementId: "G-Z24WRV168F"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function showTrackingResult(content) {
            resultBody.innerHTML = content;
            resultPopup.style.display = 'flex';
        }
        function formatLogs(logs) {
            if (!Array.isArray(logs) || logs.length === 0) return "<li>No logs available.</li>";
            return logs.map(log =>
                `<li>
                    ${log.status ? `<strong>${log.status}</strong>` : ''}
                    ${log.location ? ` <span>📍 ${log.location}</span>` : ''}
                    ${log.datetime ? ` <span>🕒 ${log.datetime}</span>` : ''}
                </li>`
            ).join("");
        }

        async function searchTracking() {
            const inputValue = inputField.value.trim();
            showTrackingResult("🔍 Searching...");
            if (!inputValue) {
                showTrackingResult("❌ Please enter a valid value.");
                return;
            }
            try {
                const snapshot = await db.collection("orders").where(selectedTrackingField, "==", inputValue).get();
                if (snapshot.empty) {
                    showTrackingResult("❌ No record found.");
                    return;
                }
                const data = snapshot.docs[0].data();
                const createdAt = data.createdAt?.toDate().toLocaleString() || "N/A";
                // Show all fields including admin ones!
                const infoHtml = `
                    <h3>📦 Full Delivery Tracking Information</h3>
                    <table style="width:100%;border-collapse:collapse">
                        <tr><th style="text-align:left;">Tracking Number / AWB / Order ID</th><td>${data.awb || data.orderId || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Current Status</th><td>${data.status || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Last Known Location</th><td>${data.location || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Estimated Delivery Time (ETA)</th><td>${data.eta || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Sender Name/Company</th><td>${data.senderName || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Recipient Name/Initials</th><td>${data.recipientName || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Recipient Signature</th><td>${data.recipientSignature || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Weight (kg)</th><td>${data.weight || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Dimensions (cm)</th><td>${data.dimensions || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Delivery Attempts</th><td>${typeof data.deliveryAttempts === 'number' ? data.deliveryAttempts : 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Description</th><td>${data.description || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Mobile Number</th><td>${data.mobile || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">LRN Number</th><td>${data.lrn || 'N/A'}</td></tr>
                        <tr><th style="text-align:left;">Order ID</th><td>${data.orderId || 'N/A'}</td></tr>
                    </table>
                    <strong style="display:block;margin:10px 0 5px 0;">Shipment History / Tracking Logs:</strong>
                    <ul style="margin:0 0 10px 15px;">${formatLogs(data.logs)}</ul>
                    <p style="font-size: 12px; color: gray;">Created at: ${createdAt}</p>
                `;
                showTrackingResult(infoHtml);
            } catch (error) {
                console.error("Error fetching tracking info:", error);
                showTrackingResult("❌ Error occurred while searching. Please try again.");
            }
        }
        otpButton.addEventListener('click', searchTracking);
    </script>
</body>
</html>